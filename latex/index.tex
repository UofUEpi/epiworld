\label{index_md_README}%
\Hypertarget{index_md_README}%
 \href{https://github.com/UofUEpi/epiworld/actions/workflows/ci.yml}{\texttt{ }} \href{https://UofUEpi.github.io/epiworld}{\texttt{ }}\hypertarget{index_autotoc_md0}{}\doxysection{epiworld}\label{index_autotoc_md0}
This C++ library provides a general framework for epidemiologic simulation. The core principle of {\ttfamily epiworld} is fast epidemiological prototyping for building complex models quickly. Here are some of its main features\+:


\begin{DoxyItemize}
\item It only depends on the standard library (C++11 required.)
\item It is a template library.
\item It is header-\/only (\href{epiworld.hpp}{\texttt{ single file}}).
\item Models can have an arbitrary set of states.
\item \mbox{\hyperlink{class_viruses}{Viruses}} and tools (e.\+g., vaccines, mask-\/wearing) can be designed to have arbitrary features.
\item Multiple tools and viruses can live in the same simulation.
\item It is {\itshape FAST}\+: About 7.\+5 Million person/day simulations per second (see example below).
\end{DoxyItemize}

Various examples can be found in the \mbox{[}examples\mbox{]}(examples) folder.\hypertarget{index_autotoc_md1}{}\doxysubsection{Hello world}\label{index_autotoc_md1}
Here is a simple SIR model implemented with {\ttfamily epiworld}. The source code can be found \href{readme.cpp}{\texttt{ here}}, and you can compile the code as follows\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{g++ -\/std=c++17 -\/O2 readme.cpp -\/o readme.o}

\end{DoxyCode}


As you can see in \href{readme.cpp}{\texttt{ readme.\+cpp}}, to use epiworld you only need to incorporate the single header file \href{epiworld.hpp}{\texttt{ epiworld.\+hpp}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "{}epiworld.hpp"{}}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{using namespace }epiworld;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{int} main()}
\DoxyCodeLine{\{}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Creating a model with three statuses:}}
\DoxyCodeLine{    \textcolor{comment}{// -\/ Susceptible: Status 0}}
\DoxyCodeLine{    \textcolor{comment}{// -\/ Infected: Status 1}}
\DoxyCodeLine{    \textcolor{comment}{// -\/ Recovered: Status 2}}
\DoxyCodeLine{    \mbox{\hyperlink{class_model}{Model<>}} model;}
\DoxyCodeLine{    model.add\_status(\textcolor{stringliteral}{"{}Susceptible"{}}, default\_update\_susceptible<>);}
\DoxyCodeLine{    model.add\_status(\textcolor{stringliteral}{"{}Infected"{}}, default\_update\_exposed<>);}
\DoxyCodeLine{    model.add\_status(\textcolor{stringliteral}{"{}Recovered"{}});}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Desgining a virus: This virus will:}}
\DoxyCodeLine{    \textcolor{comment}{// -\/ Have a 90\% transmission rate}}
\DoxyCodeLine{    \textcolor{comment}{// -\/ Have a 50\% recovery rate}}
\DoxyCodeLine{    \textcolor{comment}{// -\/ Infected individuals become "{}Infected"{} (status 1)}}
\DoxyCodeLine{    \textcolor{comment}{// -\/ Recovered individuals become "{}Recovered"{} (status 2)}}
\DoxyCodeLine{    \textcolor{comment}{// Only five individuals will have the virus from the beginning.}}
\DoxyCodeLine{    \mbox{\hyperlink{class_virus}{Virus<>}} virus(\textcolor{stringliteral}{"{}covid 19"{}});}
\DoxyCodeLine{}
\DoxyCodeLine{    virus.set\_prob\_infecting(.9);}
\DoxyCodeLine{    virus.set\_prob\_recover(.5);}
\DoxyCodeLine{    }
\DoxyCodeLine{    virus.set\_status(1, 2);}
\DoxyCodeLine{}
\DoxyCodeLine{    model.add\_virus\_n(virus, 5);}
\DoxyCodeLine{    }
\DoxyCodeLine{    \textcolor{comment}{// Generating a random pop from a smallworld network}}
\DoxyCodeLine{    model.population\_smallworld(100000);}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Initializing setting days and seed}}
\DoxyCodeLine{    model.init(100, 123);}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Running the model}}
\DoxyCodeLine{    model.\mbox{\hyperlink{class_model_a825c7fb2498c7693cbf1bfcd0a416ef4}{run}}();}
\DoxyCodeLine{    model.print();}
\DoxyCodeLine{  }
\DoxyCodeLine{\}}

\end{DoxyCode}


And you should get something like the following\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{Running the model...}
\DoxyCodeLine{\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
\DoxyCodeLine{||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||| done.}
\DoxyCodeLine{}
\DoxyCodeLine{\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_}
\DoxyCodeLine{SIMULATION STUDY}
\DoxyCodeLine{}
\DoxyCodeLine{Population size    : 100000}
\DoxyCodeLine{Days (duration)    : 100 (of 100)}
\DoxyCodeLine{Number of variants : 1}
\DoxyCodeLine{Last run elapsed t : 134.00ms}
\DoxyCodeLine{Rewiring           : off}
\DoxyCodeLine{}
\DoxyCodeLine{Virus(es):}
\DoxyCodeLine{ -\/ covid 19 (baseline prevalence: 5 seeds)}
\DoxyCodeLine{}
\DoxyCodeLine{Tool(s):}
\DoxyCodeLine{ (none)}
\DoxyCodeLine{}
\DoxyCodeLine{Model parameters:}
\DoxyCodeLine{ (none)}
\DoxyCodeLine{}
\DoxyCodeLine{Distribution of the population at time 100:}
\DoxyCodeLine{-\/ (0) Total Susceptible :  99995 -\/> 95466}
\DoxyCodeLine{-\/ (1) Total Infected    :      5 -\/> 70}
\DoxyCodeLine{-\/ (2) Total Recovered   :      0 -\/> 4464}

\end{DoxyCode}


Which took about 0.\+134 seconds ($\sim$ 7.\+5 million ppl x day / second).\hypertarget{index_autotoc_md2}{}\doxysubsection{Simulation Steps}\label{index_autotoc_md2}
The core logic of the model relies on user-\/defined statuses and their corresponding update functions. In particular, the model does not have a predefined set of statuses, e.\+g., susceptible, infected, recovered; it is the user who establishes them. This provides a great deal of flexibility as models in {\ttfamily epiworld} can have an arbitrary set of statuses.

Like most other ABM, {\ttfamily epiworld} simulates the evolution of a system in discrete steps. Each step represents a day in the system, and changes are reflected at the beginning of the following day. Therefore, agents can become recovered and transmit a virus on the same day. A single step of {\ttfamily epiworld} features the following procedures\+:


\begin{DoxyEnumerate}
\item {\bfseries{Status update}}\+: Agents are updated according to the status they are at.
\item (optional) {\bfseries{Execute global actions}}\+: A call of user-\/defined functions affecting the system. These can make any type of change in the system.
\item (optional) {\bfseries{Apply rewiring algorithm}}\+: When specified, the network is rewired according to a user-\/defined function.
\item {\bfseries{Lock the results}}\+: The current date is incremented in one unit and the changes (exposition, new infections, recoveries, etc.) are recorded in the database.
\item (optional) {\bfseries{Mutate Variants}}\+: When defined, variants can mutate, with the new variants appearing the next day.
\end{DoxyEnumerate}

To speed up computations, {\ttfamily epiworld} uses by default a queuing system that decides which agents will be active during each step and which will not. Agents are active when either they or at least one of their neighbors has a virus active. Agents\textquotesingle{} updates are triggered only for those who are in the queue, which in most cases accelerates the completion of the current step.\hypertarget{index_autotoc_md3}{}\doxysubsection{Agents}\label{index_autotoc_md3}
Agents carry two sets of important information\+: viruses and tools. Each agent can have multiple instances of them, meaning that multiple viruses and tools can coexist in a model. At each step of the simulation, an agent can face the following changes\+:


\begin{DoxyItemize}
\item $\ast$$\ast$\+Acquire a virus ({\ttfamily add\+\_\+virus()})$\ast$$\ast$\+: Become exposed to a particular virus+host.
\item $\ast$$\ast$\+Lose a virus ({\ttfamily rm\+\_\+virus()})$\ast$$\ast$\+: Removing a virus from the agent. Losing a virus triggers a call to the virus\textquotesingle{}s {\ttfamily postrecovery()} function, which can, for example, result in gaining immunity to that variant.
\item $\ast$$\ast$\+Change status ({\ttfamily change\+\_\+status()})$\ast$$\ast$\+: An arbitrary change in the status of the agent. Examples of this are moving from \char`\"{}exposed\char`\"{} to \char`\"{}infected,\char`\"{} from \char`\"{}infected\char`\"{} to \char`\"{}\+ICU,\char`\"{} etc.
\item $\ast$$\ast$\+Become removed ({\ttfamily rm\+\_\+agent\+\_\+by\+\_\+virus()})$\ast$$\ast$\+: An agent becomes inactive after its condition becoming worse. In such a case, all viruses attached to the agent are removed as well.
\end{DoxyItemize}

Any action in the model can trigger a change in its queuing system. By default, becoming exposed makes the agent (and its neighbors) active in the queuing system. Likewise, losing all viruses could make the agent and its neighbors inactive.\hypertarget{index_autotoc_md5}{}\doxysubsection{Contagion}\label{index_autotoc_md5}
Susceptible individuals can acquire a virus from any of their infected connections. The probability that susceptible individual {\ttfamily i} gets the virus {\ttfamily v} from individual {\ttfamily j} depends on how three things\+:


\begin{DoxyEnumerate}
\item The transmissibility of the virus, ,
\item The contagion reduction factor of {\ttfamily i}, , and
\item The host\textquotesingle{}s transmission reduction factor, .
\end{DoxyEnumerate}

The last two are computed from  and \textquotesingle{}s tools. Ultimately, the probability of  getting virus \$v\$ from  equals\+:



Nonetheless, the default behavior of the simulation model is to assume that individuals can acquire only one disease at a time, if any. This way, the actual probability is\+:



The latter is calculated using Bayes\textquotesingle{} rule



Where



This way, viruses with higher transmissibility will be more likely to be acquired when competing with other variants. 